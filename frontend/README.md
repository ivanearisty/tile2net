# Brooklyn Pedestrian Infrastructure Temporal Viewer

A React-based visualization tool for exploring temporal changes in pedestrian infrastructure data generated by [tile2net](https://github.com/VIDA-NYU/tile2net).

![Map Preview](https://img.shields.io/badge/Mapbox-GL-blue) ![React](https://img.shields.io/badge/React-19-61dafb) ![Recharts](https://img.shields.io/badge/Recharts-3.5-8884d8)

## Features

- ğŸ—ºï¸ **Interactive Map** - Mapbox GL-powered map with multiple style options (Dark, Satellite, Streets, Light)
- ğŸ“Š **Temporal Analysis** - Compare infrastructure changes across different years
- ğŸ”„ **Compare Mode** - Side-by-side swipe comparison between two time periods
- ğŸ“¸ **NYC Historical Imagery** - Access 100+ years of NYC aerial photography (1924-2024)
- ğŸ“ˆ **Metrics Dashboard** - Recharts-powered visualizations of infrastructure trends
- ğŸ¯ **Tolerance-based Comparison** - Smart matching algorithm to handle ML output variance

## Prerequisites

- Node.js 16+ 
- npm or yarn
- Mapbox account with access token

## Setup

### 1. Install Dependencies

```bash
cd frontend
npm install
```

### 2. Configure Environment

Create a `.env` file in the frontend folder:

```env
REACT_APP_MAPBOX_TOKEN=your_mapbox_token_here
```

Get your Mapbox token from: https://account.mapbox.com/access-tokens/

### 3. Prepare Data

If you have tile2net output shapefiles, convert them to GeoJSON:

```bash
# From the project root
python convert_shapefiles.py
```

This will create GeoJSON files in `frontend/public/data/`:
- `network_YYYY.geojson` - Infrastructure line data for each year
- `polygons_YYYY.geojson` - Polygon data for each year
- `manifest.json` - Metadata about available years and location

### 4. Run Development Server

```bash
npm start
```

The app will open at [http://localhost:3000](http://localhost:3000)

## Project Structure

```
frontend/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ data/              # GeoJSON data files
â”‚       â”œâ”€â”€ manifest.json
â”‚       â”œâ”€â”€ network_2014.geojson
â”‚       â”œâ”€â”€ network_2016.geojson
â”‚       â””â”€â”€ ...
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Map.jsx              # Main map component
â”‚   â”‚   â”œâ”€â”€ CompareMap.jsx       # Side-by-side comparison
â”‚   â”‚   â”œâ”€â”€ TemporalSlider.jsx   # Year selection slider
â”‚   â”‚   â”œâ”€â”€ MetricsDashboard.jsx # Charts and graphs
â”‚   â”‚   â”œâ”€â”€ ChangeSummary.jsx    # Statistics cards
â”‚   â”‚   â”œâ”€â”€ CompareControls.jsx  # Compare mode UI
â”‚   â”‚   â””â”€â”€ ImageOverlay.jsx     # NYC imagery comparison
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ realData.js          # Data loading & comparison logic
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â”œâ”€â”€ Map.css
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ App.jsx                  # Main application
â””â”€â”€ package.json
```

## Usage

### Normal Mode
1. Use the **timeline slider** to navigate between years
2. Click **Play** to auto-animate through the timeline
3. View the **summary cards** for quick statistics
4. Check the **charts** for trends over time

### Compare Mode
1. Toggle **Compare Mode** in the sidebar
2. Select "Before" and "After" years
3. **Drag the slider** on the map to reveal differences
4. Click **Compare Satellite Imagery** for NYC historical photos

### Map Styles
Use the style buttons (bottom-left) to switch between:
- ğŸŒ™ Dark - Best for infrastructure visibility
- ğŸŒ Satellite - Aerial imagery with labels
- ğŸ  Streets - Standard street map
- â˜€ï¸ Light - Light theme

## Legend

| Color | Status |
|-------|--------|
| ğŸŸ¢ Green | Added infrastructure |
| ğŸ”´ Red | Removed infrastructure |
| âšª Gray | Unchanged infrastructure |

## Configuration

### Tolerance Settings

Edit `src/data/realData.js` to adjust comparison sensitivity:

```javascript
const TOLERANCE = {
  DISTANCE: 0.00005,  // ~5 meters
  LENGTH_RATIO: 0.2,  // 20% length variance
  ANGLE: 15,          // 15Â° angle tolerance
};
```

## Build for Production

```bash
npm run build
```

Output will be in the `build/` folder.

## Technologies

- **React 19** - UI framework
- **Mapbox GL JS** - Interactive maps
- **Recharts** - Data visualization
- **NYC DoITT API** - Historical aerial imagery

## Data Sources

- Infrastructure data: tile2net ML segmentation
- Historical imagery: NYC Department of Information Technology & Telecommunications
- Base maps: Mapbox

## License

MIT
